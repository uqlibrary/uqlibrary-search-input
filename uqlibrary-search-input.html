<link rel="import" href="../core-input/core-input.html">
<link rel="import" href="../core-icon-button/core-icon-button.html">


<!--

Reusable search input

##### Example

<uqlibrary-search-input></uqlibrary-search-input>

@element uqlibrary-search-input
@blurb Reusable search input
@status alpha
@homepage https://github.com/uqlibrary/uqlibrary-search-input
-->

<polymer-element name="uqlibrary-search-input" attributes="narrow placeholderText">
    <template>
        <style>
            /*search input uses white and full width of a flex */
            #input {
                color: #fff;
                width: 100%;
                height: 41px;
            }
            /*
            search input placeholder text should be weaker than user's input text,
             this gives it material design level of transparency, across browsers
             */
            ::-webkit-input-placeholder { /* WebKit browsers */
                color:    rgba(255,255,255,0.7);
            }
            ::-moz-placeholder { /* Mozilla Firefox 19+ */
                color:    rgba(255,255,255,0.7);
            }
            :-ms-input-placeholder { /* Internet Explorer 10+ */
                color:    #ddd;
            }
        </style>

        <!--back arrow is hidden if view is not narrow and if it's not in search mode-->
        <core-icon-button icon="arrow-back" on-tap="{{hideSearch}}" hidden?="{{searchIsHidden || !narrow}}"></core-icon-button>
        <core-icon-button icon="search" on-tap="{{clickedSearch}}" hidden?="{{narrow && !searchIsHidden}}"></core-icon-button>
        <input id="input" placeholder="{{placeholderText}}" is="core-input" hidden?="{{narrow && searchIsHidden}}">


    </template>
    <script>
        Polymer('uqlibrary-search-input', {
            searchIsHidden: true,
            that: this,

            ready: function () {
            },
            hideSearch: function() {
                console.log('clicking back while narrow!');
                this.fire('uqlibrary-search-input-back');
                this.searchIsHidden = true;
            },
            clickedSearch: function() {
                if (this.narrow) {
                    console.log('its narrow!');
                    this.fire('uqlibrary-search-input-button-clicked-narrow');
                    this.searchIsHidden = false;
                } else if (!this.narrow) {
                    console.log('it isnt narrow!');
                    this.fire('uqlibrary-search-input-button-clicked');
                }
            }
        });
    </script>
</polymer-element>